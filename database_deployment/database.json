{
	"AWSTemplateFormatVersion": "2010-09-09",
	"Description": "Defines database infrastructure for ExpenseTracker.",
	"Parameters": {
		"VPC": {
			"Description": "Just select the one and only default VPC",
			"Type": "AWS::EC2::VPC::Id"
		},
		"DatabaseSubnetGroup": {
			"Description": "DB subnet group",
			"Type": "String"
		},
		"DatabaseSecurityGroup": {
			"Description": "DB security group",
			"Type": "String"
		}
	},
	"Resources": {
		"Database": {
			"Type": "AWS::RDS::DBInstance",
			"Properties": {
				"AllocatedStorage": "5",
				"AllowMajorVersionUpgrade": false,
				"AutoMinorVersionUpgrade": true,
				"BackupRetentionPeriod": "7",
				"CopyTagsToSnapshot": true,
				"DBInstanceClass": "db.t2.micro",
				"DBInstanceIdentifier": "expensedb",
				"DBName": "expense_db",
				"DBSecurityGroups": [ {"Ref": "DatabaseSecurityGroup"} ],
				"DBSubnetGroupName" : {"Ref": "DatabaseSubnetGroup"},
				"Engine" : "mysql",
				"MasterUsername" : "temp",
				"MasterUserPassword" : "temptemp",
				"MultiAZ" : false,
				"Port" : 3306,
				"StorageEncrypted" : false
			}
		}
	},
	"Outputs": {
		"Database": {
			"Value": {"Ref": "Database"},
			"Description": "Expense Tracker Relational DB"
		}
	}
}